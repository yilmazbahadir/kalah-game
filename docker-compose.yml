version: '3'
services:
  service-registry:
    image: bahadiryilmaz/kalah-service-registry
    hostname: service-registry
    ports:
    - "8761:8761"
  backend-services:
    image: bahadiryilmaz/kalah-backend
    deploy:
          mode: replicated
          replicas: 1
    environment:
    - EUREKA_URI=http://service-registry:8761/eureka
    depends_on:
    - service-registry

  service-gateway:
    image: bahadiryilmaz/kalah-service-gateway
    ports:
    - "8080:8080"
    environment:
    - EUREKA_URI=http://service-registry:8761/eureka
    depends_on:
    - service-registry
    - backend-services

  frontend:
    image: bahadiryilmaz/kalah-frontend
    ports:
    - "3060:3060"
    depends_on:
    - service-gateway

